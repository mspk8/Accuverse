{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/client_dashboard.css' %}">
<title>{% block title %}Clients Dashboard{% endblock %}</title>

{% endblock %}

{% block content %}
<div class="clients-section">
  <h2 class="table-heading">Clients Information</h2>
  <div>
    <table class="clients-table" style="margin-left:20px;">
      <thead>
        <tr>
          <th>Company Name</th>
          <th>Client Name</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for client in show_clients %}
        <tr>
          <td>{{ client.company_name }}</td>
          <td>{{ client.client_name }}</td>
          <td class="actions-cell" style="margin-left:20px;">
            <div class="actions-dropdown">
              <button class="actions-btn horizontal" type="button" onclick="toggleDropdown(this)">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
              </button>
              <div class="actions-dropdown-menu">
                <a href="#">View</a>
                <a href="#">Manage</a>
              </div>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
function toggleDropdown(btn) {
  // Close other open dropdowns first
  document.querySelectorAll('.actions-dropdown').forEach(function(drop){
    if(drop !== btn.parentElement) {
      drop.classList.remove('open');
    }
  });
  btn.parentElement.classList.toggle('open');
}

// Close if clicking outside of dropdown
document.addEventListener('click', function(event) {
  document.querySelectorAll('.actions-dropdown').forEach(function(drop) {
    if (!drop.contains(event.target)) {
      drop.classList.remove('open');
    }
  });
});
</script>
{% endblock %}
